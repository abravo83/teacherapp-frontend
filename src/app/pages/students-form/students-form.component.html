<section
  class="bg-white py-5 d-flex justify-content-center align-items-center"
  style="min-height: 100vh"
>
  <div
    class="card container p-5 border-0 shadow-lg bg-light"
    style="max-width: 800px; width: 90%"
  >
    <h3
      class="btn shadow title w-auto align-self-center text-uppercase text-center"
    >
      {{ tipo }} tu perfil de alumno
    </h3>

    <form
      [formGroup]="studentForm"
      (ngSubmit)="obtenerDatosFormulario()"
      class="mt-4"
    >
      <div class="row">
        <div class="mx-auto my-2 fw-light col-md-6 text-center">
          <label
            class="form-label"
            for="foto"
            title="Modifica tu imagen de perfil"
            >Foto
            <img
              [src]="profileImgUrl"
              alt="Imagen de perfil"
              class="form__img__profile img-fluid"
            />
          </label>
          <input
            class="form-control visually-hidden"
            type="file"
            id="foto"
            accept="image/png, image/jpeg, image/webp"
            (change)="obtenerImagen($event)"
            #fileInput
          />
          @if(checkControl('foto', 'formatoInvalido')) {
          <p class="text-danger">
            El archivo debe ser una imagen en formato JPG, PNG o WEBP
          </p>
          }
        </div>
      </div>
      <div class="row">
        <div class="my-2 fw-light col-md-6 mb-3">
          <label class="form-label" for="nombre">Nombre</label>
          <input
            class="form-control"
            type="text"
            id="nombre"
            formControlName="nombre"
            placeholder="Introduce el nombre"
          />
          @if(checkControl('nombre', 'required')) {
          <p class="text-danger">El nombre es obligatorio</p>
          } @if(checkControl('nombre', 'maxlength')) {
          <p class="text-danger">El nombre no debe exceder 45 caracteres</p>
          }
        </div>

        <div class="my-2 fw-light col-md-6 mb-3">
          <label class="form-label" for="apellidos">Apellidos</label>
          <input
            class="form-control"
            type="text"
            id="apellidos"
            formControlName="apellidos"
            placeholder="Introduce los apellidos"
          />
          @if(checkControl('apellidos', 'required')) {
          <p class="text-danger">Los apellidos son obligatorios</p>
          } @if(checkControl('apellidos', 'maxlength')) {
          <p class="text-danger">
            Los apellidos no deben exceder 150 caracteres
          </p>
          }
        </div>
      </div>

      <div class="row">
        <div class="my-2 fw-light col-md-6 mb-3">
          <label class="form-label" for="password">Contraseña</label>
          <input
            class="form-control"
            type="password"
            id="password"
            formControlName="password"
            placeholder="Introduce la contraseña"
          />
          @if(checkControl('password', 'required')) {
          <p class="text-danger">La contraseña es obligatoria</p>
          } @if(checkControl('password', 'minlength')) {
          <p class="text-danger">
            La contraseña debe tener al menos 8 caracteres
          </p>
          } @if(checkControl('password', 'maxlength')) {
          <p class="text-danger">
            La contraseña no debe exceder 255 caracteres
          </p>
          } @if(checkControl('password', 'pattern')) {
          <p class="text-danger">Debe incluir una mayúscula y un número</p>
          }
        </div>

        <div class="my-2 fw-light col-md-6 mb-3">
          <label class="form-label" for="repitepassword"
            >Repite Contraseña</label
          >
          <input
            class="form-control"
            type="password"
            id="repitepassword"
            formControlName="repitepassword"
            placeholder="Repite la contraseña"
          />
          @if(checkControl('repitepassword', 'required')) {
          <p class="text-danger">Debe repetir la contraseña</p>
          } @if(studentForm.hasError('checkpassword')) {
          <p class="text-danger">Las contraseñas no coinciden</p>
          }
        </div>
      </div>

      <div class="row">
        <div class="my-2 mx-auto fw-light col-md-6 mb-3">
          <label class="form-label" for="email">Email</label>
          <input
            class="form-control"
            type="email"
            id="email"
            formControlName="email"
            placeholder="Introduce el email"
          />
          @if(checkControl('email', 'required')) {
          <p class="text-danger">El email es obligatorio</p>
          } @if(checkControl('email', 'email')) {
          <p class="text-danger">Formato de email inválido</p>
          } @if(checkControl('email', 'maxlength')) {
          <p class="text-danger">El email no debe exceder 60 caracteres</p>
          }
        </div>
      </div>

      <div class="mt-4 text-center">
        <input
          type="submit"
          [value]="tipo"
          class="button-primary pointer"
          [disabled]="!studentForm.valid || errorForm.length > 0"
        />
      </div>
    </form>

    <div class="mt-4">
      @for( error of errorForm; track $index ) { @if(error.message) {
      <p class="text-danger">{{ error.field }}: {{ error.message }}</p>
      } }
    </div>
  </div>
</section>

<div class="container mt-4">

  <!--Encabezado con botón de edición-->
  <div class="d-flex justify-content-center mb-4">
    <h2>Mi Cuenta</h2> 
    <button class="btn button-secondary" (click)="activarEdicion()">
      {{modoEdicion ? 'Guardad Cambios' : 'Editar'}}
    </button>
  </div>


  <!-- Foto de Perfil -->
  <div class="d-flex justify-content-center mb-4">
    <div>
      <img
        [src]="fotoUrl || 'ruta/por-defecto.jpg'"
        class="img-thumbnail"
        alt="Foto de perfil"
        style="width: 150px; height: 150px; object-fit: cover;"
      />
      <input
        type="file"
        accept="image/*"
        (change)="obtenerImagen($event)"
        class="form-control mt-2"
      />
    </div>
  </div>

  <form [formGroup]="myAccountForm" (ngSubmit)="guardarCambios()">
<!-- Información General -->
<div class="card mb-4">
  <div class="card-header">
    <h5>General</h5>
  </div>
  <div class="card-body row" formGroupName="usuario">
    <div class="my-2 fw-light col-md-6">
      <label for="nombre" class="form-label">Nombre</label>
      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        class="form-control"
        placeholder="Introduce el nombre"
      />
      <div *ngIf="checkControl('nombre', 'required')" class="text-danger">
        El nombre es obligatorio
      </div>
      <div *ngIf="checkControl('nombre', 'maxlength')" class="text-danger">
        El nombre no debe exceder 45 caracteres
      </div>
    </div>

    <div class="my-2 fw-light col-md-6">
      <label for="apellidos" class="form-label">Apellidos</label>
      <input
        id="apellidos"
        type="text"
        formControlName="apellidos"
        class="form-control"
        placeholder="Introduce los apellidos"
      />
    </div>

    <div class="my-2 fw-light col-md-6">
      <label for="email" class="form-label">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        class="form-control"
        placeholder="Introduce el email"
      />
    </div>

    <div class="my-2 fw-light col-md-6">
      <label for="telefono" class="form-label">Teléfono</label>
      <input
        id="telefono"
        type="tel"
        formControlName="telefono"
        class="form-control"
        placeholder="Introduce el teléfono"
      />
    </div>
  </div>
</div>

<!-- Información del Profesor -->
<div class="card mb-4">
  <div class="card-header">
    <h5>Información del Profesor</h5>
  </div>
  <div class="card-body row" formGroupName="profesor">
    <div class="my-2 fw-light col-md-6">
      <label for="precio_hora" class="form-label">Precio por Hora</label>
      <input
        id="precio_hora"
        type="number"
        formControlName="precio_hora"
        class="form-control"
        placeholder="Introduce el precio por hora"
      />
    </div>

    <div class="my-2 fw-light col-md-6">
      <label for="localizacion" class="form-label">Localización</label>
      <input
        id="localizacion"
        type="text"
        formControlName="localizacion"
        class="form-control"
        placeholder="Introduce la localización"
      />
    </div>

    <div class="my-2 fw-light col-md-6">
      <label for="meses_experiencia" class="form-label">Meses de Experiencia</label>
      <input
        id="meses_experiencia"
        type="number"
        formControlName="meses_experiencia"
        class="form-control"
        placeholder="Introduce los meses de experiencia"
      />
    </div>

    <div class="my-2 fw-light col-md-6">
      <label class="form-label">Materias</label>
      <div formArrayName="materias" *ngFor="let materia of materias.controls; let i = index">
        <input
          [formControlName]="i"
          type="text"
          class="form-control mt-1"
          placeholder="Materia {{ i + 1 }}"
        />
      </div>
    </div>
  </div>
</div>

    <!-- Información Adicional -->
    <div class="card mb-4">
      <div class="card-header">
        <h5>Información Adicional</h5>
      </div>
      <div class="card-body row">
        <div class="my-2 fw-light col-md-6">
          <label for="direccion" class="form-label">Dirección</label>
          <input
            id="direccion"
            type="text"
            formControlName="direccion"
            class="form-control"
            placeholder="Introduce la dirección"
          />
        </div>
      </div>
    </div>

    <!-- Sobre mí -->
    <div class="card mb-4">
      <div class="card-header">
        <h5>Sobre mí</h5>
      </div>
      <div class="card-body">
        <textarea
          formControlName="sobre_mi"
          rows="4"
          class="form-control"
          placeholder="Describe algo sobre ti"
        ></textarea>
      </div>
    </div>

    <!-- Botón de Guardar Cambios -->
    <div class="mt-4 mb-5 text-center">
      <button
        type="submit"
        class="button-primary pointer"
        [disabled]="!myAccountForm.valid"
      >
        Guardar Cambios
      </button>
    </div>
  </form>
</div>
